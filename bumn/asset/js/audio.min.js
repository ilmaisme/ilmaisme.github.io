var trigbutton=document.getElementById("playpause"),myAudio=document.getElementById("audio"),myCanvas=document.getElementById("canvas");function start(){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var t=document.getElementById("audio"),e=new AudioContext,n=e.createAnalyser();e.createMediaElementSource(t).connect(n),n.connect(e.destination);new Uint8Array(n.frequencyBinCount);var a=document.getElementById("canvas"),o=a.width,i=a.height-2,d=[];e=a.getContext("2d"),gradient=e.createLinearGradient(0,0,0,300),gradient.addColorStop(1,"#fff"),gradient.addColorStop(.5,"#fff"),gradient.addColorStop(0,"#fff"),function t(){var a=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(a);var r=Math.round(a.length/(800/12));e.clearRect(0,0,o,i);for(var u=0;u<800/12;u++){var c=a[u*r];d.length<Math.round(800/12)&&d.push(c),e.fillStyle="#fff",c<d[u]?e.fillRect(12*u,i- --d[u],10,2):(e.fillRect(12*u,i-c,10,2),d[u]=c),e.fillStyle=gradient,e.fillRect(12*u,i-c+2,10,i)}requestAnimationFrame(t)}()}trigbutton.onclick=function(){var t="pause!"===trigbutton.value;trigbutton.value=t?"play!":"pause!",myCanvas.classList.add("active"),myAudio[t?"pause":"play"](),start()},audio.onplay=function(){},audio.onpause=function(){trigbutton.value="play!",trigbutton.checked=!1,myCanvas.classList.remove("active")};