var trigbutton=document.getElementById("playpause"),myAudio=document.getElementById("audio"),myCanvas=document.getElementById("canvas");function start(){window.AudioContext=window.AudioContext||window.webkitAudioContext||window.mozAudioContext;var t=document.getElementById("audio"),e=new AudioContext,n=e.createAnalyser();e.createMediaElementSource(t).connect(n),n.connect(e.destination);new Uint8Array(n.frequencyBinCount);var a=document.getElementById("canvas"),o=a.width,i=a.height-2,d=[];e=a.getContext("2d"),gradient=e.createLinearGradient(0,0,0,300),gradient.addColorStop(1,"#fff"),gradient.addColorStop(.5,"#fff"),gradient.addColorStop(0,"#fff"),function t(){var a=new Uint8Array(n.frequencyBinCount);n.getByteFrequencyData(a);var u=Math.round(a.length/(800/12));e.clearRect(0,0,o,i);for(var r=0;r<800/12;r++){var l=a[r*u];d.length<Math.round(800/12)&&d.push(l),e.fillStyle="#fff",l<d[r]?e.fillRect(12*r,i- --d[r],10,2):(e.fillRect(12*r,i-l,10,2),d[r]=l),e.fillStyle=gradient,e.fillRect(12*r,i-l+2,10,i)}requestAnimationFrame(t)}()}trigbutton.onclick=function(){var t="pause!"===trigbutton.value;trigbutton.value=t?"play!":"pause!",myCanvas.classList.add("active"),myAudio[t?"pause":"play"](),start()},audio.onplay=function(){},audio.onpause=function(){trigbutton.value="play!",trigbutton.checked=!1};