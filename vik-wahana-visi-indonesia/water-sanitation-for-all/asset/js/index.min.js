function removePreloader(){setTimeout((function(){const e=document.getElementById("preloader");e&&(e.style.transition="opacity 0.2s ease",e.style.opacity="0",setTimeout((function(){e.remove()}),200))}),1500)}window.addEventListener("load",removePreloader),gsap.registerPlugin(ScrollTrigger),ScrollTrigger.normalizeScroll(!0),window.visualViewport?(window.visualViewport.addEventListener("resize",(()=>{setAppHeight(),adjustLeafPosition(),resizeRipplesAndPosition(),ScrollTrigger.refresh()})),window.visualViewport.addEventListener("scroll",(()=>{setAppHeight()}))):window.addEventListener("resize",(()=>{setAppHeight(),adjustLeafPosition(),resizeRipplesAndPosition(),ScrollTrigger.refresh()}));let rippleTimeline=null;function adjustLeafPosition(){const e=document.querySelector(".leaf-container"),t=document.querySelector(".droplet"),i=document.querySelector(".splash");if(!e||!t||!i)return;e.style.right="auto";const o=e.getBoundingClientRect(),l=t.getBoundingClientRect(),n=(i.getBoundingClientRect(),window.innerWidth/2),r=l.left+l.width/2-o.left,s=-(o.width-r-n);e.style.right=s+"px"}function resizeRipplesAndPosition(){const e=document.querySelector(".splash"),t=document.querySelector(".background-bottom"),i=document.querySelector(".ripples"),o=document.querySelectorAll(".ripple"),l=document.querySelector(".scroll-scene");if(!(e&&t&&i&&l))return;const n=e.getBoundingClientRect(),r=l.getBoundingClientRect(),s=n.top-r.top+n.height/2;t.style.top=s+"px",t.style.height=Math.max(0,r.height-s)+"px";const p=t.getBoundingClientRect(),c=n.left+n.width/2,a=n.top+n.height/2,d=c-p.left;let u=a-p.top;u+=window.innerWidth/1920*75,i.style.left=d+"px",i.style.top=u+"px";const g=Math.max(120,2*n.width),h=.5*g;o.forEach((e=>{e.style.width=g+"px",e.style.height=h+"px",e.style.left="0px",e.style.top="0px",e.style.transform="translate(-50%, -50%)"}))}function startRipples(){rippleTimeline||(gsap.set(".ripple",{opacity:.9,scaleX:.4,scaleY:.15}),rippleTimeline=gsap.timeline({repeat:-1}),[".ripple1",".ripple2",".ripple3"].forEach(((e,t)=>{rippleTimeline.fromTo(e,{scaleX:.4,scaleY:.15,opacity:.9},{scaleX:1.5,scaleY:.5,opacity:0,duration:3,ease:"none"},1*t)})))}function stopRipples(){rippleTimeline&&(rippleTimeline.kill(),rippleTimeline=null),gsap.set(".ripple",{opacity:0})}function getDropYOffset(){const e=document.querySelector(".splash").getBoundingClientRect(),t=document.querySelector(".droplet").getBoundingClientRect(),i=window.visualViewport?window.visualViewport.offsetTop:0,o=window.scrollY;return e.top+e.height/2+o+i-(t.top+t.height/2+o+i)}window.addEventListener("load",(()=>{adjustLeafPosition(),resizeRipplesAndPosition(),ScrollTrigger.refresh()}));let tl=gsap.timeline({scrollTrigger:{trigger:".scroll-scene",start:"top top",end:"80% center",scrub:!0}});tl.to(".droplet",{y:()=>getDropYOffset(),ease:"power1.in"}).add("land"),tl.to([".splash",".caption",".ripples"],{opacity:1,duration:.6,ease:"power1.out",onStart:startRipples,onReverseComplete:stopRipples},"land-=0.01");