var iss_mobile=!1;if("none"==$("#some-element").css("display")&&(iss_mobile=!0),1==iss_mobile){function init(e){$("#reduxmob").eraser({size:20})}function remove(e){$("#reduxmob").eraser("clear"),e.preventDefault()}function reset(e){$("#reduxmob").eraser("reset"),e.preventDefault()}console.log("eraser mobile true"),function(e){var t={init:function(o){return this.each((function(){var a=e(this),r=a.data("eraser");if(!r){var n=a.width(),i=a.height(),c=a.offset(),u=e("<canvas/>"),s=u.get(0),h=o&&o.size?o.size:100,l=o&&o.completeRatio?o.completeRatio:.7,p=o&&o.completeFunction?o.completeFunction:null,f=[],m=Math.floor(n/h),v=m*Math.floor(i/h),d=v,g=s.getContext("2d");for(a.after(u),s.id=this.id,s.className=this.className,s.width=n,s.height=i,g.drawImage(this,0,0),a.remove(),g.globalCompositeOperation="destination-out",g.strokeStyle="rgba(255,0,0,255)",g.lineWidth=h,g.lineCap="round",u.bind("mousedown.eraser",t.mouseDown),u.bind("touchstart.eraser",t.touchStart),u.bind("touchmove.eraser",t.touchMove),u.bind("touchend.eraser",t.touchEnd);d--;)f.push(1);r={posX:c.left,posY:c.top,touchDown:!1,touchID:-999,touchX:0,touchY:0,ptouchX:0,ptouchY:0,canvas:u,ctx:g,w:n,h:i,source:this,size:h,parts:f,colParts:m,numParts:v,ratio:0,complete:!1,completeRatio:l,completeFunction:p},u.data("eraser",r),e(window).resize((function(){var e=u.offset();r.posX=e.left,r.posY=e.top}))}}))},touchStart:function(o){var a=e(this).data("eraser");if(!a.touchDown){var r=o.originalEvent.changedTouches[0],n=r.pageX-a.posX,i=r.pageY-a.posY;t.evaluatePoint(a,n,i),a.touchDown=!0,a.touchID=r.identifier,a.touchX=n,a.touchY=i,o.preventDefault()}},touchMove:function(o){var a=e(this).data("eraser");if(a.touchDown)for(var r=o.originalEvent.changedTouches,n=r.length;n--;)if(r[n].identifier==a.touchID){var i=r[n].pageX-a.posX,c=r[n].pageY-a.posY;t.evaluatePoint(a,i,c),a.ctx.beginPath(),a.ctx.moveTo(a.touchX,a.touchY),a.touchX=i,a.touchY=c,a.ctx.lineTo(a.touchX,a.touchY),a.ctx.stroke(),o.preventDefault();break}},touchEnd:function(t){var o=e(this).data("eraser");if(o.touchDown)for(var a=t.originalEvent.changedTouches,r=a.length;r--;)if(a[r].identifier==o.touchID){o.touchDown=!1,t.preventDefault();break}},evaluatePoint:function(e,t,o){var a=Math.floor(t/e.size)+Math.floor(o/e.size)*e.colParts;a>=0&&a<e.numParts&&(e.ratio+=e.parts[a],e.parts[a]=0,e.complete||e.ratio/e.numParts>=e.completeRatio&&(e.complete=!0,null!=e.completeFunction&&e.completeFunction()))},mouseDown:function(o){var a=e(this),r=a.data("eraser"),n=o.pageX-r.posX,i=o.pageY-r.posY;t.evaluatePoint(r,n,i),r.touchDown=!0,r.touchX=n,r.touchY=i,r.ctx.beginPath(),r.ctx.moveTo(r.touchX-1,r.touchY),r.ctx.lineTo(r.touchX,r.touchY),r.ctx.stroke(),a.bind("mousemove.eraser",t.mouseMove),e(document).bind("mouseup.eraser",r,t.mouseUp),o.preventDefault()},mouseMove:function(o){var a=e(this).data("eraser"),r=o.pageX-a.posX,n=o.pageY-a.posY;t.evaluatePoint(a,r,n),a.ctx.beginPath(),a.ctx.moveTo(a.touchX,a.touchY),a.touchX=r,a.touchY=n,a.ctx.lineTo(a.touchX,a.touchY),a.ctx.stroke(),o.preventDefault()},mouseUp:function(t){var o=t.data,a=o.canvas;o.touchDown=!1,a.unbind("mousemove.eraser"),e(document).unbind("mouseup.eraser"),t.preventDefault()},clear:function(){var t=e(this).data("eraser");if(t){t.ctx.clearRect(0,0,t.w,t.h);for(var o=t.numParts;o--;)t.parts[o]=0;t.ratio=t.numParts,t.complete=!0,null!=t.completeFunction&&t.completeFunction()}},size:function(t){var o=e(this).data("eraser");o&&t&&(o.size=t,o.ctx.lineWidth=t)},reset:function(){var t=e(this).data("eraser");if(t){t.ctx.globalCompositeOperation="source-over",t.ctx.drawImage(t.source,0,0),t.ctx.globalCompositeOperation="destination-out";for(var o=t.numParts;o--;)t.parts[o]=1;t.ratio=0,t.complete=!1}}};e.fn.eraser=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Method "+o+" does not yet exist on jQuery.eraser"):t.init.apply(this,arguments)}}(jQuery),addEventListener("load",init,!1)}else{function init(e){$("#redux").eraser({size:30})}function remove(e){$("#redux").eraser("clear"),e.preventDefault()}function reset(e){$("#redux").eraser("reset"),e.preventDefault()}console.log("eraser desktop true"),function(e){var t={init:function(o){return this.each((function(){var a=e(this),r=a.data("eraser");if(!r){var n=a.width(),i=a.height(),c=a.offset(),u=e("<canvas/>"),s=u.get(0),h=o&&o.size?o.size:100,l=o&&o.completeRatio?o.completeRatio:.7,p=o&&o.completeFunction?o.completeFunction:null,f=[],m=Math.floor(n/h),v=m*Math.floor(i/h),d=v,g=s.getContext("2d");for(a.after(u),s.id=this.id,s.className=this.className,s.width=n,s.height=i,g.drawImage(this,0,0),a.remove(),g.globalCompositeOperation="destination-out",g.strokeStyle="rgba(255,0,0,255)",g.lineWidth=h,g.lineCap="round",u.bind("mouseenter.eraser",t.mouseDown),u.bind("mouseenter.eraser",t.touchStart),u.bind("touchmove.eraser",t.touchMove),u.bind("mouseleave.eraser",t.touchEnd);d--;)f.push(1);r={posX:c.left,posY:c.top,touchDown:!1,touchID:-999,touchX:0,touchY:0,ptouchX:0,ptouchY:0,canvas:u,ctx:g,w:n,h:i,source:this,size:h,parts:f,colParts:m,numParts:v,ratio:0,complete:!1,completeRatio:l,completeFunction:p},u.data("eraser",r),e(window).resize((function(){var e=u.offset();r.posX=e.left,r.posY=e.top}))}}))},touchStart:function(o){var a=e(this).data("eraser");if(!a.touchDown){var r=o.originalEvent.changedTouches[0],n=r.pageX-a.posX,i=r.pageY-a.posY;t.evaluatePoint(a,n,i),a.touchDown=!0,a.touchID=r.identifier,a.touchX=n,a.touchY=i,o.preventDefault()}},touchMove:function(o){var a=e(this).data("eraser");if(a.touchDown)for(var r=o.originalEvent.changedTouches,n=r.length;n--;)if(r[n].identifier==a.touchID){var i=r[n].pageX-a.posX,c=r[n].pageY-a.posY;t.evaluatePoint(a,i,c),a.ctx.beginPath(),a.ctx.moveTo(a.touchX,a.touchY),a.touchX=i,a.touchY=c,a.ctx.lineTo(a.touchX,a.touchY),a.ctx.stroke(),o.preventDefault();break}},touchEnd:function(t){var o=e(this).data("eraser");if(o.touchDown)for(var a=t.originalEvent.changedTouches,r=a.length;r--;)if(a[r].identifier==o.touchID){o.touchDown=!1,t.preventDefault();break}},evaluatePoint:function(e,t,o){var a=Math.floor(t/e.size)+Math.floor(o/e.size)*e.colParts;a>=0&&a<e.numParts&&(e.ratio+=e.parts[a],e.parts[a]=0,e.complete||e.ratio/e.numParts>=e.completeRatio&&(e.complete=!0,null!=e.completeFunction&&e.completeFunction()))},mouseDown:function(o){var a=e(this),r=a.data("eraser"),n=o.pageX-r.posX,i=o.pageY-r.posY;t.evaluatePoint(r,n,i),r.touchDown=!0,r.touchX=n,r.touchY=i,r.ctx.beginPath(),r.ctx.moveTo(r.touchX-1,r.touchY),r.ctx.lineTo(r.touchX,r.touchY),r.ctx.stroke(),a.bind("mousemove.eraser",t.mouseMove),e(document).bind("mouseup.eraser",r,t.mouseUp),o.preventDefault()},mouseMove:function(o){var a=e(this).data("eraser"),r=o.pageX-a.posX,n=o.pageY-a.posY;t.evaluatePoint(a,r,n),a.ctx.beginPath(),a.ctx.moveTo(a.touchX,a.touchY),a.touchX=r,a.touchY=n,a.ctx.lineTo(a.touchX,a.touchY),a.ctx.stroke(),o.preventDefault()},mouseUp:function(t){var o=t.data,a=o.canvas;o.touchDown=!1,a.unbind("mousemove.eraser"),e(document).unbind("mouseup.eraser"),t.preventDefault()},clear:function(){var t=e(this).data("eraser");if(t){t.ctx.clearRect(0,0,t.w,t.h);for(var o=t.numParts;o--;)t.parts[o]=0;t.ratio=t.numParts,t.complete=!0,null!=t.completeFunction&&t.completeFunction()}},size:function(t){var o=e(this).data("eraser");o&&t&&(o.size=t,o.ctx.lineWidth=t)},reset:function(){var t=e(this).data("eraser");if(t){t.ctx.globalCompositeOperation="source-over",t.ctx.drawImage(t.source,0,0),t.ctx.globalCompositeOperation="destination-out";for(var o=t.numParts;o--;)t.parts[o]=1;t.ratio=0,t.complete=!1}}};e.fn.eraser=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Method "+o+" does not yet exist on jQuery.eraser"):t.init.apply(this,arguments)}}(jQuery),addEventListener("load",init,!1)}